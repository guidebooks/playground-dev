"use strict";(self.webpackChunkKuiClientTemplate=self.webpackChunkKuiClientTemplate||[]).push([[8752],{86481:(e,n,t)=>{t.d(n,{Q:()=>c,Z:()=>s});var o=t(347),a=t(28724),i=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};function c(e,n){return i(this,void 0,void 0,(function*(){const t=(yield e.REPL.qexec(`kubectl get all -n ${n} -o custom-columns=KIND:.kind`)).body.reduce(((e,{name:n})=>(e[n]=(e[n]||0)+1,e)),{});return{header:{name:"KIND",attributes:[{key:"COUNT",value:"COUNT"}]},body:Object.keys(t).map((e=>({name:e,onclick:`kubectl get ${e} -n ${n}`,attributes:[{key:"COUNT",value:t[e].toLocaleString()}]}))).sort(((e,n)=>t[n.name]-t[e.name]))}}))}function r(e){const n=e.argvNoOptions[e.argvNoOptions.length-1];return c(e.tab,n)}function u({tab:e}){return i(this,void 0,void 0,(function*(){return(yield(0,o.getCurrentContext)(e)).metadata.namespace}))}const s=e=>{e.listen("/namespace/current",u,a.L6),e.listen("/namespace/summarize",r,a.L6)}},68215:(e,n,t)=>{function o(e){return"IP"===e?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function a(e){return e.body.reduce(((e,n)=>(e[o(n.key)]=n.name,n.attributes.forEach((({key:n,value:t})=>{e[o(n)]=t})),e)),{})}t.d(n,{k:()=>o,Z:()=>a})},78752:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ye});var o=t(11227),a=t.n(o),i=t(23918),c=t(88342),r=t(62892),u=t(18495),s=t(25218),l=t(73258),d=t.n(l),m=t(68215);function p(e){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{groups:Object.keys(e).map((n=>({term:n,description:e[n]?e[n].toString():null===e[n]?"null":""})))}}}function f(e){return e.matchLabels?Object.keys(e.matchLabels).map((n=>`${n}=${e.matchLabels[n]}`)).join(", "):""}var h=t(58853),v=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};function y({metadata:e},n=new Date){return d()(("string"==typeof n?new Date(n):n).getTime()-new Date(e.creationTimestamp).getTime())}function g(e){const{readyReplicas:n,replicas:t}=e.status;return`${n||0}/${t}`}var b=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const w=a()("plugin-kubectl/view/modes/Summary");var k=t(26430);const $=(0,u.i18n)("plugin-kubectl");function P(e,n){const t=n.status.addresses.find((n=>n.type===e));return t?t.address:"<none>"}function C(e){try{return parseInt(e)}catch(n){return e}}function x(e,{status:n}){return $("percentFree",k.ZP.fractionOfMemory(n.allocatable[e],n.capacity[e]))}function R(e){const{containerStatuses:n}=e.status;return`${n?n.reduce(((e,n)=>e+(n.ready?1:0)),0):0}/${n.length}`}function O(e){const{containerStatuses:n}=e.status;return n.reduce(((e,n)=>e+n.restartCount),0)}function j(e){return e.spec.readinessGates?e.spec.readinessGates.map((e=>e.conditionType||"")).join(", "):"<none>"}var N=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const T=(0,u.i18n)("plugin-kubectl");const E={when:s.l7,mode:{mode:"summary",label:T("summary"),content:function({REPL:e},n){return N(this,void 0,void 0,(function*(){try{return(0,s.xS)(n)?n.summary:(0,s.th)(n)?function(e){const{spec:n,status:t}=e;return p({Ready:R(e),Status:t.phase,Restarts:O(e),Age:y(e),IP:t.podIP,Node:n.nodeName,"Nominated node":n.nominatedNodeName||"<none>","Readiness gates":j(e)})}(n):(0,s.Yc)(n)?function(e){const{spec:n,status:t}=e,{template:{spec:{containers:o}}}=n;return p({Ready:g(e),"Up-to-date":t.readyReplicas||0,Available:t.availableReplicas||0,Age:y(e),Containers:o.map((e=>e.name)).join(", "),Images:o.map((e=>e.image)).join(", "),Selector:f(n.selector)})}(n):(0,s.MN)(n)?function(e){const{spec:n,status:t}=e,{template:{spec:{containers:o}}}=n;return p({Desired:t.replicas,Current:t.availableReplicas,Ready:t.readyReplicas,Age:y(e),Containers:o.map((e=>e.name)).join(", "),Images:o.map((e=>e.image)).join(", "),Selector:f(n.selector)})}(n):(0,s.cO)(n)?function(e){const{metadata:n,involvedObject:t,source:o,reason:a,type:i,message:c,firstTimestamp:r,lastTimestamp:u,count:s}=e;return p({"Last seen":d()(Date.now()-new Date(u).getTime()),Object:`${t.kind}/${t.name}`,Type:i,Reason:a,Subobject:t.fieldPath,Source:`${o.component||""}${o.host?(o.component?", ":"")+o.host:""}`,Message:c,"First seen":d()(Date.now()-new Date(r).getTime()),Count:s,Name:n.name})}(n):(0,s.UG)(n)?function(e){const{metadata:n,status:t}=e;return p({Name:n.name,Age:y(e),CPUs:C(t.capacity.cpu),Memory:k.ZP.reformatAsBytes(t.capacity.memory)+` (${x("memory",e)})`,"Ephemeral Storage":k.ZP.reformatAsBytes(t.capacity["ephemeral-storage"])+` (${x("ephemeral-storage",e)})`,"External IP":P("ExternalIP",e),"Internal IP":P("InternalIP",e),"OS Image":t.nodeInfo.osImage,"Kernel Version":t.nodeInfo.kernelVersion,"Container Runtime":t.nodeInfo.containerRuntimeVersion})}(n):(0,s.ko)(n)?function(e){const{metadata:n,type:t}=e;return p({Name:n.name,Type:t,Age:y(e)})}(n):(0,s.Cr)(n)?function(e){const{metadata:n,spec:t,status:o}=e,{containers:a}=t.template.spec;return p({Name:n.name,Completions:`${o.succeeded}/${t.completions}`,Duration:y(e,o.completionTime),Age:y(e),Containers:a.map((e=>e.image)).join(", "),Selector:f(t.selector)})}(n):(0,s.me)(n)?function(e,n){return b(this,void 0,void 0,(function*(){const{metadata:t,status:o}=e,a={Name:t.name,Status:o.phase,Age:y(e)};try{const t=yield n.qexec((0,h.QG)(e.originatingCommand,`kubectl get quota -n ${e.metadata.name}`));if((0,u.isTable)(t)&&t.body.length>=1){const e=t.body.map((e=>(0,m.Z)({body:[e]})));Object.assign(a,{quota:e})}}catch(e){w("no quota found")}return p(a)}))}(n,e):function(e,n){return v(this,void 0,void 0,(function*(){const t=(0,h.QG)(e.originatingCommand,`kubectl get ${e.kind} ${e.metadata.name} -n ${e.metadata.namespace} -o wide`);return p((0,m.Z)(yield n.qexec(t)))}))}(n,e)}catch(e){return 404===e.code?T("This resource has been deleted"):(console.error(e),{content:n.kuiRawData,contentType:"yaml"})}}))},defaultMode:!0,order:-999}};var I=t(53450),S=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const L=(0,u.i18n)("plugin-kubectl");function D(e,n,t){return S(this,void 0,void 0,(function*(){return`${(0,I.fY)(t)} get ${(0,I.kJ)(n.apiVersion,(0,u.encodeComponent)(n.kind),(0,u.encodeComponent)(n.metadata.name),(0,u.encodeComponent)(n.metadata.namespace||(yield(0,I.Yi)(e))))}`}))}const Z={when:s.MP,mode:{mode:"show-crd-resources",label:L("Show Resources"),command:D,kind:"drilldown"}};var Y=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const A=(0,u.i18n)("plugin-kubectl"),V=a()("plugin-kubectl/view/modes/crd-summary");const M={when:s.MP,mode:{mode:"summary",label:A("summary"),content:function(e,n,o){return Y(this,void 0,void 0,(function*(){const{group:a,version:i,scope:c}=n.spec,r=n.spec.names.kind,u=c?{Scope:c}:{},s=a?{Group:a}:{},l=i?{Version:i}:{},d=r?{Kind:r}:{},m=Object.assign({},u,s,l,d),p=t.e(8163).then(t.bind(t,78163));try{const{body:t}=yield e.REPL.qexec(`${D(e,n,o)} -o custom-columns=NAME:.metadata.name`);m["Resource count"]=t.length}catch(e){V("error fetching resource count for crd",e)}return{content:(yield p).dump(m),contentType:"yaml"}}))},priority:10}};var q=t(50816),B=t(88363),G=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const K=(0,u.i18n)("plugin-kubectl");function U(e,n,t){const o=`${(0,q.fY)(t)} get ${(0,B.uE)(n)} -o wide`;return e.REPL.qexec(o).then(m.Z)}const J={when:s.O,mode:{mode:"summary",label:K("summary"),content:function(e,n,o){return G(this,void 0,void 0,(function*(){const[a,{dump:i}]=yield Promise.all([U(e,n,o),t.e(8163).then(t.bind(t,78163))]);if(n.data){delete a.Data;try{for(const e in n.data)"string"==typeof n.data[e]&&(a[e]=n.data[e])}catch(e){console.error("error parsing configmap data",e)}}return{content:i(a),contentType:"yaml"}}))},priority:10}};var Q=t(86481);const z="resources",F=(0,u.i18n)("plugin-kubectl")(z);const W={when:s.me,mode:{mode:z,label:F,content:function(e,n){return(0,Q.Q)(e,n.metadata.name)}}};var _=t(67294);const H="logs";var X=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const ee=_.lazy((()=>Promise.all([t.e(2320),t.e(1316)]).then(t.bind(t,11316)))),ne=(0,u.i18n)("plugin-kubectl","logs");const te={when:e=>(0,s.th)(e)||(0,s.Yc)(e)||(0,s.MN)(e),mode:{mode:H,label:ne("Logs"),content:function(e,n,t){return X(this,void 0,void 0,(function*(){return{react:function(o){return _.createElement(ee,{tab:e,mode:H,resource:n,args:t,toolbarController:o})}}}))}}};var oe=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const ae=_.lazy((()=>Promise.all([t.e(2320),t.e(9194)]).then(t.bind(t,79194)))),ie="terminal";const ce={when:e=>(0,s.th)(e)&&!e.isSimulacrum,mode:{mode:ie,label:"Terminal",content:function(e,n,t){return oe(this,void 0,void 0,(function*(){return{react:function(o){return _.createElement(ae,{tab:e,mode:ie,resource:n,args:t,toolbarController:o})}}}))}}};var re=t(89525);const ue=(0,u.i18n)("plugin-kubectl");const se={when:s.k1,mode:{mode:"ownerReference",kind:"drilldown",showRelatedResource:!0,label:ue("Show Owner Reference"),command:function(e,{metadata:{namespace:n,ownerReferences:[{apiVersion:t,kind:o,name:a}]}},i){return`${(0,q.fY)(i)} get ${(0,B.kJ)(t,(0,u.encodeComponent)(o),(0,u.encodeComponent)(a),(0,u.encodeComponent)(n||"default"))} -o yaml`}}},le=(0,u.i18n)("plugin-kubectl");const de={when:s.th,mode:{mode:"show-node",kind:"drilldown",showRelatedResource:!0,label:le("Show Node"),command:function(e,n,t){return`${(0,q.fY)(t)} get node ${n.spec.nodeName} -o yaml`}}};var me=t(60898);const pe=(0,u.i18n)("plugin-kubectl");const fe={icon:_.createElement(me.PJ,{icon:"Trash"}),mode:"delete",order:100,label:pe("deleteResource"),kind:"drilldown",command:function(e,n,t){return`${(0,q.fY)(t)} delete ${(0,B.uE)(n)}`},confirm:!0},he={when:s.Rt,mode:fe};var ve=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const ye=(0,u.i18n)("plugin-kubectl");const ge={when:s._E,mode:{mode:"involvedObject",label:ye("Show Involved Object"),showRelatedResource:!0,command:function(e,{involvedObject:{apiVersion:n,kind:t,name:o,namespace:a}},i){return ve(this,void 0,void 0,(function*(){return`${(0,I.fY)(i)} get ${(0,B.kJ)(n,(0,u.encodeComponent)(t),(0,u.encodeComponent)(o),(0,u.encodeComponent)(a||(yield(0,I.Yi)(e))))} -o yaml`}))},kind:"drilldown"}};var be=t(70764);const we={when:function(e){return(0,I.Rt)(e)&&!(0,be.jK)(e)},mode:{mode:"edit-button",label:(0,u.i18n)("plugin-client-common","editor")("Edit"),icon:_.createElement(me.PJ,{icon:"Edit"}),inPlace:!0,kind:"drilldown",command:(e,n,t)=>`${(0,I.fY)(t)} edit ${(0,I.uE)(n)}`}};var ke=t(40881),$e=t(84323);const Pe={when:function(e){return(0,s.Rt)(e)&&!(0,s.cO)(e)&&(0,s.ri)(e)},mode:{mode:"events",label:(0,u.i18n)("plugin-kubectl")("Show Events"),kind:"drilldown",showRelatedResource:!0,command:function(e,n,t){const o=`involvedObject.apiVersion=${n.apiVersion},involvedObject.kind=${n.kind},involvedObject.name=${n.metadata.name},involvedObject.namespace=${n.metadata.namespace}`,a=[(0,q.fY)(t),"get","events","--field-selector",o,"-n",n.metadata.namespace,"-w"];return(0,h.QG)(t,a.join(" "))}}},Ce={when:s.cO,badge:e=>{const n=ke.Z[e.reason];return{title:n?e.reason:e.type,css:n||("Error"===e.type?$e.Z.Red:"Warning"===e.type?$e.Z.Yellow:void 0)}}},xe=(0,u.i18n)("plugin-kubectl");const Re={when:s.w2,mode:{mode:"annotations",label:xe("Annotations"),content:function(e,n){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{groups:Object.keys(n.metadata.annotations).filter((e=>"kubectl.kubernetes.io/last-applied-configuration"!==e&&n.metadata.annotations[e].length>0)).sort(((e,n)=>e.length-n.length)).map((e=>({term:e,description:n.metadata.annotations[e]})))}}}}},Oe=(0,u.i18n)("plugin-kubectl");const je={when:s.o2,mode:{mode:"labels",label:Oe("Labels"),content:function(e,n){return{apiVersion:"kui-shell/v1",kind:"DescriptionList",spec:{as:"labels",groups:Object.keys(n.metadata.labels).filter((e=>n.metadata.labels[e].length>0)).sort(((e,n)=>e.length-n.length)).map((e=>({term:e,description:n.metadata.labels[e]})))}}}}};var Ne=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};function Te(e,n,t){return Ne(this,void 0,void 0,(function*(){return(yield e.REPL.qexec(n,void 0,void 0,{raw:!0})).split(/[\n\r]/).map((e=>e.replace(/^\w+\//,""))).filter((e=>e.startsWith(t.toBeCompleted))).map((e=>e.substring(t.toBeCompleted.length)))}))}function Ee(e,n=(()=>!0)){const t=e.parsedOptions;return Object.keys(t).filter(n).filter((e=>!/^(-o|--output)/.test(e))).map((e=>`${1===e.length?`-${e}`:`--${e}`} ${t[e]}`)).join(" ")}function Ie(e){return"attach"===e||"exec"===e||"logs"===e}function Se(e){return"cordon"===e||"uncordon"===e||"drain"===e||"taint"===e}function Le(e,n,t){return Ne(this,void 0,void 0,(function*(){const{argvNoOptions:o,argv:a,parsedOptions:i}=n,c=(0,q.fY)({argvNoOptions:o}),r=-1===t.toBeCompletedIdx?n.argv.length-1:t.toBeCompletedIdx-1,u=o[1];if(r>0&&("-n"===a[r]||"--namespace"===a[r])){const o=`${c} get ns ${Ee(n,(e=>"-n"!==e&&"--namespace"!==e))} -o name`;return Te(e,o,t)}if(("kubectl"===o[0]||"k"===o[0]||"oc"===o[0])&&!/^-/.test(a[r])&&("get"===u||"annotate"===u||"describe"===u||"pod"===u||"edit"===u||"label"===u||Ie(u)||Se(u)||"delete"===u&&!i.f&&!i.file)){const a=`${c} get ${Ie(u)?"pod":Se(u)?"node":o[2]} ${Ee(n)} -o name`;return Te(e,a,t)}}))}var De=t(73423),Ze=function(e,n,t,o){return new(t||(t=Promise))((function(a,i){function c(e){try{u(o.next(e))}catch(e){i(e)}}function r(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,r)}u((o=o.apply(e,n||[])).next())}))};const Ye=e=>Ze(void 0,void 0,void 0,(function*(){(0,i.Z)();const n=e.registerModes(c.ZP,r.ZP,E,M,J,W,Re,je,Pe,te,ce,re.ZP,we,Z,se,de,he,ge),t=e.registerBadges(Ce);De.c.mkdir({argvNoOptions:["mkdir","/kui/kubernetes"]}),De.c.cp(void 0,["plugin://plugin-kubectl/notebooks/create-jobs.md","plugin://plugin-kubectl/notebooks/create-jobs.json","plugin://plugin-kubectl/notebooks/crud-operations.md","plugin://plugin-kubectl/notebooks/crud-operations.json","plugin://plugin-kubectl/notebooks/deploy-applications.md","plugin://plugin-kubectl/notebooks/deploy-applications.json"],"/kui/kubernetes/");try{(0,u.registerTabCompletionEnumerator)(Le)}catch(e){a()("plugins/kubeui/preload")("error installing kubeui tab-completion extensions",e)}yield Promise.all([n,t])}))}}]);