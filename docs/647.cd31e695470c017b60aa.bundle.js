"use strict";(self.webpackChunkKuiClientTemplate=self.webpackChunkKuiClientTemplate||[]).push([[647],{50647:(e,r,t)=>{t.r(r),t.d(r,{setGraphicalShellIsOpen:()=>C,print:()=>W});var n=t(11227),o=t.n(n),a=t(42138),s=t.n(a),i=t(61284),l=t(67041),c=t(45061),d=t(3242),g=t(17803),p=t(23022),h=t(186);const m=o()("main/headless-pretty-print");m("loading");const u=console.log,f=console.error,y=h.argv.find((e=>"--color=always"===e)),b=h.argv.find((e=>"--no-color"===e||"--no-colors"===e)),v=h.argv.find((e=>"--raw-output"===e)),w="win32"!==h.platform&&h.stdout.isTTY;m("stdoutIsFIFO",w,b||w&&!y);const T={"var(--color-brand-01)":s().blue,"var(--color-brand-02)":s().blue,"var(--color-support-02)":s().blue,"var(--color-black)":s().black,"var(--color-red)":s().red,"var(--color-green)":s().green,"var(--color-yellow)":s().yellow,"var(--color-blue)":s().blue,"var(--color-magenta)":s().magenta,"var(--color-cyan)":s().cyan,"var(--color-white)":s().white,"var(--color-gray)":s().gray,"var(--color-light-red)":s().red,"var(--color-light-green)":s().green,"var(--color-light-yellow)":s().yellow};let k=!1,x=!1;const C=e=>(x=e,!k&&(k=!0,!0));class S{}let I=!0;const E=(e,r=u,t=h.stdout,n,{columnWidths:o,extraColor:a}=new S)=>{m("prettyDom");const i="h1"===e.nodeType||"h2"===e.nodeType||"h3"===e.nodeType||"h4"===e.nodeType,l=e.className.indexOf("bx--breadcrumb-item--slash")>=0||e.className.indexOf("left-pad")>=0||e.style.margin||e.style.padding;l&&t.write(" ");const c=i||e.hasStyle("fontWeight","bold")?s().bold:e.hasStyle("fontWeight",500)?s().green:e.hasStyle("fontSize","0.875em")?s().gray:a||s().reset,d=e.hasStyle("color")&&T[e.style.color]||n;if(i&&(I?I=!1:r()),e.innerText){const r=e.innerText;t.write(c(d(r)))}if(l&&t.write(" "),e.innerText&&("div"===e.nodeType||i)&&r(),e.children.forEach((e=>E(e,r,t,n,{extraColor:c}))),e.rows){const o=[];e.rows.forEach((e=>{e.cells&&e.cells.forEach(((e,r)=>{const t=e.recursiveInnerTextLength();o[r]?o[r]=Math.max(o[r],t):o[r]=t}))})),e.rows.forEach((e=>{E(e,r,t,n,{columnWidths:o}),r()}))}e.cells&&e.cells.forEach(((a,s)=>{if(E(a,r,t,n),o&&s<e.cells.length-1){const e=o[s]-a.recursiveInnerTextLength();for(let r=0;r<e;r++)t.write(" ");t.write("  ")}})),i&&!e.innerText&&r()},D=(e,r)=>s().dim(""+(r?r+"/":""))+s().blue(e),F=e=>{const r=new Date(e),t=new Date;return r.getUTCFullYear()===t.getUTCFullYear()&&r.getUTCMonth()===t.getUTCMonth()&&r.getUTCDate()===t.getUTCDate()?r.toLocaleTimeString():r.toLocaleString()},N=e=>s().dim(e?"public":"private"),O=({name:e,packageName:r,publish:t,annotations:n,version:o})=>{return{name:D(e,r),"published?":N(t),kind:(a=n,s().green(a.find((({key:e})=>"exec"===e)).value)),version:s().dim(o)};var a},L=({name:e,publish:r,binding:t})=>({name:D(e),"published?":N(r),binding:t}),U=({sessionId:e,name:r,success:t,status:n,start:o})=>({sessionId:e,app:D(r),start:s().dim(F(o)),status:"pending"===n?s().yellow(n):t?s().green(n):s().red(n)}),M={compositions:({name:e,packageName:r,prettyKind:t})=>({name:D(e,r),type:t}),session:U,activations:({activationId:e,name:r})=>({activationId:e,name:D(r)}),actions:O,triggers:({name:e,publish:r})=>({name:D(e),"published?":N(r)}),packages:L,plugins:({name:e,attributes:r})=>({name:D(e),version:s().dim(r.find((({key:e})=>"version"===e)).value)}),_default:({key:e,name:r,attributes:t})=>{const n={};return n[e||"name"]=D(r),t.forEach((e=>{e.placeholderValue||(n[e.key]=e.value)})),n},sequence:O,composer:O,binding:L,live:U},W=(e,r=u,n=h.stdout,o=s().reset,a="ok")=>{if("error"===a&&(o=s().red),e&&(!k||x))try{if(!0===e)m("printing plain true"),r(s().green(a));else if("string"==typeof e||"boolean"==typeof e||"number"==typeof e)n.write(e);else if(i.Z.isFakeDom(e))m("printing fake dom"),e.className.indexOf("usage-error-wrapper")>=0&&(n=h.stdout,r=u),E(e,r,n,o),r();else{if((0,p.t)(e))return m("printing promise"),e.then((e=>W(e,r,n,o,a)));if((0,l.wb)(e)){if(0===e.body.length)return;m("printing table");const n=e.header&&(e.header.prettyType||e.header.type)||e.body.length>0&&(e.body[0].prettyType||e.body[0].type),o=n&&M[n]||M._default;r(t(99295)(e.body.map(o),{headingTransform:e=>s().dim(e)}))}else{if((0,c.Bf)(e))return e.forEach((e=>{W(e),n.write("\n")})),r(s().green(a));if((0,d.a)(e)||(0,g.bI)(e))throw new Error("cannot format this response in headless mode");if(Array.isArray(e)){if(m("printing array"),e.length>0)try{if("string"==typeof e[0])return e.forEach((e=>{const t=e.split(/(stdout|stderr)/);if(t&&3===t.length&&!v){const e="stdout"===t[1]?s().reset:s().red;r(s().dim(new Date(t[0].trim()).toLocaleString())+e(t[2].replace(/^:/,"")))}else r(e)})),r(s().green(a))}catch(e){f(e)}}else(0,p.F)(e)?console.error("cannot format HTML message"):(0,c.v_)(e)?i.Z.isFakeDom(e.message)?(E(e.message,r,n,o),r()):r(e.message):(0,c.If)(e)?r(e.response):"object"==typeof e?((e,r=u)=>{r(JSON.stringify(e,void 0,2))})(e,r):r(o(e))}}}catch(t){m("got an error",t),r(s().red("object"==typeof e?JSON.stringify(e):e.toString()))}}}}]);