"use strict";(self.webpackChunkKuiClientTemplate=self.webpackChunkKuiClientTemplate||[]).push([[8300,3850],{93850:(t,e,s)=>{s.r(e),s.d(e,{default:()=>a});var o=s(67294),i=s(18495),n=s(25824),r=s(50748),u=s(48317);class a extends o.PureComponent{constructor(t){super(t),this._blockRef=o.createRef(),i.Events.eventBus.onCommandComplete(this.props.uuid,this.onOutputRender.bind(this)),this.state={idx:0,model:(0,u.ZS)()}}onOutputRender(){this.setState((t=>({idx:t.idx+1,model:(0,u.ZS)()})))}doFocus(){this._blockRef.current&&this._blockRef.current.doFocus()}render(){return o.createElement(n.Z.Provider,{value:{prompt:this.props.prompt||"â¯"}},o.createElement("div",{className:"kui--input-stripe repl"},o.createElement(r.Z,{ref:this._blockRef,idx:this.state.idx,uuid:`${this.props.uuid}-${this.state.idx}`,tab:this.props.tab,model:this.state.model,noOutput:!0,noPromptContext:!0,isFocused:!0,promptPlaceholder:this.props.promptPlaceholder},this.props.children)))}}},58300:(t,e,s)=>{s.r(e),s.d(e,{default:()=>p});var o=s(67294),i=s(18495),n=s(93850),r=s(60898),u=s(186),a=function(t,e,s,o){return new(s||(s=Promise))((function(i,n){function r(t){try{a(o.next(t))}catch(t){n(t)}}function u(t){try{a(o.throw(t))}catch(t){n(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(r,u)}a((o=o.apply(t,e||[])).next())}))};class p extends o.PureComponent{constructor(t){super(t),this._inputStripeRef=o.createRef();const e=new r.he;i.Events.eventBus.onceWithTabId("/tab/close/request",e.uuid,((t,e)=>a(this,void 0,void 0,(function*(){e.REPL.qexec("window close",void 0,void 0,{tab:e})})))),i.Events.eventBus.onCommandComplete(e.uuid,(({tab:t,command:e,response:s})=>a(this,void 0,void 0,(function*(){u.env.KUI_TEE_TO_FILE&&(yield(0,i.teeToFile)(s)),this.setState({promptPlaceholder:e}),this.doFocusInput(),setTimeout((()=>t.scrollToBottom()),50),setTimeout((()=>t.scrollToBottom()),150)})))),this.state={tab:void 0,model:e,promptPlaceholder:""}}onTabReady(t){this.setState({tab:t}),(0,i.pexecInCurrentTab)(this.props.commandLine.join(" "),t),this.doFocusInput()}doFocusInput(){this._inputStripeRef.current&&setTimeout((()=>this._inputStripeRef.current.doFocus()))}render(){return o.createElement("div",{className:"kui--full-height"},o.createElement(r.I5,{noActiveInput:!0,uuid:this.state.model.uuid,active:!0,state:this.state.model.state,onTabReady:this.onTabReady.bind(this)}),o.createElement(r.VK,{noHelp:this.props.noHelp,noSettings:this.props.noSettings},o.createElement(r.Hy,{className:"kui--input-stripe-in-status-stripe flex-fill"},this.state.tab&&o.createElement(n.default,{ref:this._inputStripeRef,promptPlaceholder:this.state.promptPlaceholder,uuid:this.state.model.uuid,tab:this.state.tab})),this.props.children))}}}}]);