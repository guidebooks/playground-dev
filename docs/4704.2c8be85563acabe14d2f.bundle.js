"use strict";(self.webpackChunkKuiClientTemplate=self.webpackChunkKuiClientTemplate||[]).push([[4704,617,2625],{30617:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(67294);const o=i.lazy((()=>Promise.all([n.e(3676),n.e(3749),n.e(237),n.e(6066)]).then(n.bind(n,6066))));function a(e){return i.createElement(i.Suspense,{fallback:i.createElement("div",null)},i.createElement(o,Object.assign({},e)))}},4704:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(30617),o=n(72625),a=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))};const r={command:"card",strict:"card",example:"card [<card body text>] [--title <card title text>]",docs:"Card",optional:[{name:"body",docs:"card body text"},{name:"--title",docs:"Content rendered inside the CardTitle"},{name:"-f",docs:"File that contains the texts"},{name:"--file",docs:"File that contains the texts"}]};function s(e){return a(this,void 0,void 0,(function*(){const t=e.argvNoOptions,n=e.parsedOptions,{title:a}=n,r=n.filename||n.f;if(r){const{data:t}=yield(0,o.fetchMarkdownFile)(r,e);return{react:(0,i.default)({title:a,children:t})}}{const e=t.slice(1);if(e)return{react:(0,i.default)({title:a,children:e})};throw new Error("Invalid arguments: need card body text")}}))}const c=e=>a(void 0,void 0,void 0,(function*(){e.listen("/card",s,{usage:r})}))},72625:(e,t,n)=>{n.r(t),n.d(t,{filepathForResponses:()=>d,fetchMarkdownFile:()=>l,default:()=>f});var i=n(8575),o=n(26470),a=n(18495),r=n(72442),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))};const c={command:"commentary",strict:"commentary",example:"commentary -f [<markdown file path>]",docs:"Commentary",optional:[{name:"--title",alias:"-t",docs:"Title for the commentary"},{name:"--base-url",alias:"-b",docs:"Base URL for images"},{name:"--edit",docs:"Open the UI in edit mode"},{name:"--header",docs:"Show header text [Default: true]"},{name:"--preview",docs:"Show a preview while editing [Default: true]"},{name:"--readonly",docs:"Set the enclosing tab to be readonly"},{name:"--send",docs:"Send edits to this channel (implies --no-header and --no-preview)"},{name:"--receive",docs:"Consume edits from this channel (implies --no-header and --no-edit)"},{name:"--file",alias:"-f",docs:"File that contains the texts"}]};function d(e){return(0,o.join)((0,o.dirname)(e),(0,o.basename)(e).replace(/\..*$/,"")+".json")}function l(e,t){return s(this,void 0,void 0,(function*(){const{pathname:n}=/^https?:/.test(e)?new URL(e):{pathname:e};if(/\.md$/.test(n)){const[n,i]=yield Promise.all([(0,r.O)(e,t),(0,r.O)(d(e),t,!0)]);return{data:"string"==typeof n?n:JSON.stringify(n),codeBlockResponses:"string"==typeof i?JSON.parse(i):i}}throw new Error("File extension not support")}))}function u(e){return s(this,void 0,void 0,(function*(){const{edit:t,header:n,preview:r,receive:s,send:c,title:d,readonly:u}=e.parsedOptions,f=e.parsedOptions.file||e.parsedOptions.f,m=void 0===s&&(void 0!==c||t),p=void 0===s&&void 0===c&&n,h=void 0===c&&(void 0!==s||r),{data:v="#",codeBlockResponses:y}=f?yield l(f,e):{data:e.command.trim().slice(e.command.indexOf(" ")+1).trim().replace(/\\n/g,"\n").replace(/\\t/g,"\t").replace(/--(no-)?(header|edit|preview|readonly)\s*/g,"").replace(/(-t|--title|--send|--receive)\s+\S+\s*/g,"").replace(/^\\#/,"#"),codeBlockResponses:void 0};f&&u&&a.Events.eventBus.emitWithTabId("/kui/tab/edit/toggle",(0,a.getPrimaryTabId)(e.tab));const w=e.parsedOptions["base-url"]?(0,o.join)(e.parsedOptions["base-url"],"{filename}"):f?function(e){if(/^http:/.test(e)){const t=new URL(e);return t.pathname=t.pathname.replace((0,o.basename)(t.pathname),"{filename}"),(0,i.format)(t)}return e.replace((0,o.basename)(e),"{filename}")}(f):void 0;if(void 0!==v)return"#"===v||"commentary"===e.command?{apiVersion:"kui-shell/v1",kind:"CommentaryResponse",props:{edit:m,header:p,preview:h,receive:s,send:c,title:d,children:"",baseUrl:w}}:{apiVersion:"kui-shell/v1",kind:"CommentaryResponse",props:{edit:m,header:p,preview:h,receive:s,send:c,title:d,filepath:f,children:v,codeBlockResponses:y,baseUrl:w}};throw new Error("Insufficient arguments: must specify either --file or -f, or provide a comment on the command line")}))}function f(e){const t={boolean:["edit","header","preview","readonly"]};e.listen("/commentary",u,{usage:c,outputOnly:!0,flags:t}),e.listen("/#",u,{usage:c,outputOnly:!0,noCoreRedirect:!0,flags:t})}},72442:(e,t,n)=>{n.d(t,{O:()=>a});var i=n(18495),o=function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}c((i=i.apply(e,t||[])).next())}))};function a(e,{REPL:t},n=!1){return o(this,void 0,void 0,(function*(){try{if(/^https:/.test(e))return(yield t.rexec(`_fetchfile ${(0,i.encodeComponent)(e)}`)).content[0];{const n=i.Util.findFile(i.Util.expandHomeDir(e)),o=(yield t.rexec(`vfs fstat ${(0,i.encodeComponent)(n)} --with-data`)).content;if(o.isDirectory)throw new Error("Invalid filepath");return o.data}}catch(e){if(n)return;throw e}}))}}}]);