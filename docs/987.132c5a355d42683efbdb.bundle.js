(self.webpackChunkKuiClientTemplate=self.webpackChunkKuiClientTemplate||[]).push([[987,6835,1070],{83137:(e,t,n)=>{"use strict";n.d(t,{w:()=>r,Z:()=>c});var i=n(26470),o=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function r(e,t,r={}){return o(this,void 0,void 0,(function*(){const{mkdir:o,writeFile:s,appendFile:a}=yield n.e(3296).then(n.t.bind(n,53296,23)),c=e.replace(/"/g,"");yield new Promise(((e,n)=>{const d=t=>{if(t)if("ENOENT"===t.code){const e=new Error(t.message);e.stack=t.stack,e.code=404,n(e)}else n(t);else e(!0)},u=(e,t)=>r.append?a(e,t,d):s(e,t,d),l=(0,i.dirname)(c);"."!==l?o(l,{recursive:!0},(()=>u(c,t))):u(c,t)}))}))}const s=({argvNoOptions:e,execOptions:t,parsedOptions:n})=>o(void 0,void 0,void 0,(function*(){const i=e[1],o=t.data,s=n&&(n.append||n.a);return yield r(i,o,{append:s}),!0}));function a(e){return o(this,void 0,void 0,(function*(){const{mkTemp:t}=yield n.e(1070).then(n.bind(n,51070)),i=e.execOptions.data,{content:o}=yield t();return yield r(o,i),{mode:"raw",content:o}}))}const c=e=>{e.listen("/fwrite",s,{hidden:!0,requiresLocal:!0}),e.listen("/fwriteTemp",a,{hidden:!0,requiresLocal:!0})}},51070:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mkTemp:()=>o,default:()=>s});var i=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function o(){return i(this,void 0,void 0,(function*(){const{file:e}=yield Promise.all([n.e(5835),n.e(7288),n.e(1966)]).then(n.t.bind(n,36276,19));return new Promise(((t,n)=>{e({prefix:"kui-"},((e,i)=>{e?n(e):t({mode:"raw",content:i})}))}))}))}function r(e){return i(this,void 0,void 0,(function*(){const{unlink:t}=yield n.e(3296).then(n.t.bind(n,53296,23));return new Promise(((n,i)=>{t(e.argvNoOptions[1],(e=>{e?i(e):n(!0)}))}))}))}const s=e=>{e.listen("/mkTemp",o,{hidden:!0,requiresLocal:!0}),e.listen("/rmTemp",r,{hidden:!0,requiresLocal:!0})}},86835:(e,t,n)=>{"use strict";n.r(t),n.d(t,{preload:()=>d,plugin:()=>u});var i=n(26470),o=n(18495),r=n(94854),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function a(e,t,{toBeCompleted:n}){return s(this,void 0,void 0,(function*(){return(yield e.REPL.rexec(`fscomplete -- "${n}"`)).content}))}function c(e){return s(this,void 0,void 0,(function*(){const t=e.command.substring(e.command.indexOf("-- ")+"-- ".length).replace(/^"(.*)"$/,"$1"),n="/"===t.charAt(t.length-1),s=n?t:(0,i.dirname)(t);if(s)try{const a=o.Util.expandHomeDir(s),c=yield(0,r.ls)({tab:e.tab,REPL:e.REPL,parsedOptions:{a:!0}},[a]),d=function(e,t,n,o){const r=(0,i.basename)(n)+(o?"/":""),s=r.startsWith("."),a=e.filter((e=>{const t=e.name;return(o||0===t.indexOf(r))&&!t.endsWith("~")&&"."!==t&&".."!==t&&(s||!t.startsWith("."))})),c=/\//.test(n);return a.map((e=>{const t=e.nameForDisplay,n=o?t:t.substring(r.length),s=c?(0,i.basename)(e.nameForDisplay):void 0;return e.dirent.isDirectory||e.dirent.isSymbolicLink?{completion:/\/$/.test(n)?n:`${n}/`,label:s?/\/$/.test(s)?s:`${s}/`:void 0}:{completion:n,addSpace:!0,label:s}}))}(yield c,0,t,n);return{mode:"raw",content:d&&0!==d.length?d:[]}}catch(e){throw console.error("tab completion vfs.ls error",e),e}}))}function d(){(0,o.registerTabCompletionEnumerator)(a,-100)}function u(e){e.listen("/fscomplete",c,{hidden:!0,requiresLocal:!0})}},10987:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>De});var i=n(18495),o=n(49287),r=n(42007);const s=[{name:"path",docs:(0,i.i18n)("plugin-bash-like")("localFilePath"),file:!0,positional:!0}];var a=n(186),c=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const d=(0,i.i18n)("plugin-bash-like"),u=/(&&|\|\|)/,l={cd:{strict:"cd",command:"cd",title:d("cdUsageTitle"),header:d("cdUsageHeader"),optional:s}};function f(e,t,n,o){return c(this,void 0,void 0,(function*(){const{isDirectory:s,fullpath:c}=o?yield o.fstat(n,(0,r.AG)(e)):{isDirectory:!0,fullpath:(0,r.AG)(e)},d=o&&o.isLocal;if(s){void 0===a.env.OLDPWD&&(a.env.OLDPWD="");const e=i.Util.cwd(),t=i.Util.expandHomeDir(c);return d&&!i.Capabilities.inBrowser()&&a.chdir(t),a.env.OLDPWD=e,a.env.PWD=t,d?delete a.env.VIRTUAL_CWD:a.env.VIRTUAL_CWD=t,n.tab.state&&n.tab.state.capture(),t}throw new Error(`cd: not a directory: ${t}`)}))}const p=e=>c(void 0,void 0,void 0,(function*(){if(u.test(e.command))return e.REPL.qexec(`sendtopty ${e.command.replace(/kui(cd\s)/,"$1")}`,void 0,void 0,e.execOptions);const t=e.REPL.split(e.command,!0,!0)[1]||"";if("-"===t&&!a.env.OLDPWD)throw new Error(`cd: not a directory: ${t}`);const n=t?"-"===t?a.env.OLDPWD:t:i.Util.expandHomeDir("~"),s=yield(0,r.Xy)(n,void 0,!0);try{return yield f(n,t,e,s)}catch(i){if(!i.message||!i.message.includes("no such file or directory"))throw i;try{return yield f(n,t,e,o.Z)}catch(e){throw new Error(`cd: no such file or directory: ${t}`)}}})),h=({command:e,execOptions:t,REPL:n})=>c(void 0,void 0,void 0,(function*(){const i=yield n.qexec(e.replace(/^cd/,"kuicd"),void 0,void 0,t);return u.test(e)||(a.env.PWD=i),i}));var m=n(98046),v=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const y=(0,m.UTC)("MMM DD HH:mm"),_=(0,i.i18n)("plugin-bash-like"),w="UID",g="GID",b="Size",D="User",k="Group",O="Permissions",x="Last Modified";function M(e){return e<1024?`${e}B`:e<1048576?`${(e/1024).toFixed(1)}K`:e<1073741824?`${(e/1024/1024).toFixed(1)}M`:e<1099511627776?`${(e/1024/1024/1024).toFixed(1)}G`:`${(e/1024/1024/1024/1024).toFixed(1)}T`}function L(e){const{isDirectory:t,isSymbolicLink:n,isExecutable:i,isSpecial:o}=e.dirent;return t?"dir-listing-is-directory":n?"dir-listing-is-link":i?"dir-listing-is-executable":o?"dir-listing-is-other-special":""}const P="hide-with-sidecar",Y="slightly-deemphasize",S="hide-with-narrow-window",T="elide-with-narrow-window";function C({dirent:e}){return e.permissions}function U(e){return e.dirent.username||e.stats.uid.toString()}function $(e){return e.stats.gid.toString()}function E(e,t,n,i,o,r,s){const a=t.parsedOptions.l,c=a&&n?[{key:O,value:C(e),outerCSS:P}]:[],d=a&&o?[{key:w,value:U(e),outerCSS:P,css:Y}]:[],u=a&&r?[{key:g,value:$(e),outerCSS:P,css:Y}]:[],l=a&&i?[{key:b,value:M(e.stats.size).replace(/\s/g,""),outerCSS:"",css:"yellow-text"}]:[],f=a&&s?[{key:x,value:(p=e.stats.mtimeMs,y(new Date(p)).replace(/(\s)0/g,"$1 ")),outerCSS:S,css:`${T} ${Y} pre-wrap sub-text`}]:[];var p;return c.concat(d).concat(u).concat(l).concat(f)}function F(e,t){const n=t.parsedOptions.r?-1:1,o=t.parsedOptions.S?(e=>(t,n)=>e*(n.stats.size-t.stats.size))(n):t.parsedOptions.t?(e=>(t,n)=>e*(n.stats.mtimeMs-t.stats.mtimeMs))(n):(e=>(t,n)=>e*t.nameForDisplay.localeCompare(n.nameForDisplay))(n),r=e.some((e=>e.dirent&&e.dirent.permissions)),s=e.some((e=>e.stats&&e.stats.size)),a=e.some((e=>e.dirent&&e.dirent.username||e.stats&&e.stats.uid>=0)),c=e.some((e=>e.stats&&e.stats.gid>=0)),d=e.some((e=>e.stats&&e.stats.mtimeMs)),u=e.sort(o).map((e=>{return{name:(n=e,`${n.nameForDisplay}${n.dirent.isDirectory?n.nameForDisplay.endsWith("/")?"":"/":n.dirent.isSymbolicLink?"@":n.dirent.isExecutable?"*":""}`),css:L(e),onclickExec:"pexec",onclick:`${e.dirent.isDirectory?t.parsedOptions.l?"ls -l":"ls":void 0!==e.viewer?e.viewer:"open"} ${(0,i.encodeComponent)(e.path)}`,drilldownTo:e.dirent.isDirectory?"this-split":void 0,attributes:E(e,t,r,s,a,c,d)};var n})),l=t.parsedOptions.l,f=l&&c?[{key:k,value:"Group",outerCSS:P}]:[],p=l&&s?[{key:b,value:"Size",outerCSS:""}]:[],h=l&&d?[{key:x,value:"Last Modified",outerCSS:S,css:T}]:[],m=l?"table":"grid";return{header:{name:"Name",attributes:(l&&r?[{key:O,value:"Permissions",outerCSS:P}]:[]).concat(l&&a?[{key:D,value:"User",outerCSS:P}]:[]).concat(f).concat(p).concat(h)},body:u,noSort:!0,defaultPresentation:m,allowedPresentations:[m],style:l?void 0:i.TableStyle.Light}}const N=e=>t=>v(void 0,void 0,void 0,(function*(){const n=t.command.match(/\|\s*grep\s+([^|]+)$/),o=/\|\s*wc\s+[^|]*$/.test(t.command),r=t.command.match(/\|\s*grep\s+([\w*.]+)\s*\|\s*wc\s+[^|]*$/),s=!!r||!!o||!!n;let a=t.command;if(s)a=a.slice(0,a.indexOf("|"));else if(/\|/.test(t.command))return t.REPL.qexec(`sendtopty ${t.command}`,t.block);const c=a.replace(/^\s*ls/,"").replace(/\s--?\S+/g,""),d="vfs ls "+(t.parsedOptions.l||"lls"===e?"-l ":"")+function(e,t){return t.parsedOptions[e]?` -${e} `:""}("d",t)+c;"lls"===e&&(t.parsedOptions.l=!0);const u=(yield t.REPL.rexec(d)).content,l=t.parsedOptions.a?u:t.parsedOptions.A?u.filter((e=>"."!==e.name&&".."!==e.name)):u.filter((e=>"."!==e.name.charAt(0)));if(0===l.length){const e=l.map((e=>e.dirent.isDirectory));if(e.some((e=>!e))){const t=new Error(c.split(/\s/).map(((t,n)=>e[n]?void 0:`ls: ${t}: No such file or directory`)).filter((e=>e)).join("\n"));throw t.code=404,t}}if(n||r){const e=r?r[1]:n[1],o=(0,i.split)(e).filter((e=>!/^-/.test(e)))[0].replace(/\./g,"\\.").replace(/\*/g,".*"),s=new RegExp(/\*/.test(o)?`^${o}$`:o),a=l.filter((e=>s.test(e.name)));return n?F(a,t):a.length}return o?l.length:F(l,t)})),A=e=>({command:e,title:_("lsUsageTitle"),header:_("lsUsageHeader"),noHelpAlias:!0,optional:s.concat([{name:"-A",boolean:!0,docs:_("lsDashAUsageDocs")},{name:"-a",boolean:!0,docs:_("lsDashaUsageDocs")},{name:"-d",boolean:!0,docs:_("lsDashdUsageDocs")},{name:"-c",boolean:!0,docs:_("lsDashcUsageDocs")},{name:"-C",boolean:!0,hidden:!0},{name:"-l",boolean:!0,hidden:!0},{name:"-h",boolean:!0,hidden:!0},{name:"-t",boolean:!0,docs:_("lsDashtUsageDocs")},{name:"-r",boolean:!0,docs:_("lsDashrUsageDocs")},{name:"-s",boolean:!0,hidden:!0},{name:"-S",boolean:!0,docs:_("lsDashSUsageDocs")}])}),q=e=>{const t=e.listen("/ls",N("ls"),{usage:A("ls"),flags:{boolean:A("ls").optional.filter((e=>e.boolean)).map((e=>e.name.replace(/^-(-)?/,"")))}});e.synonym("/lls",N("lls"),t,{usage:A("lls")})},H=e=>{e.listen("/edit",(({command:e,REPL:t})=>t.qexec(e.replace(/\s*edit/,"open").replace(/--create/,""))))};var R=n(11227),W=n.n(R),G=n(26470),z=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const I=(0,i.i18n)("plugin-bash-like"),X=W()("plugins/bash-like/cmds/open");function Z(e){switch(e){case"sh":return"shell";case"md":return"text/markdown";case"html":return"text/html";case"yaml":case"json":return e;default:return"text/plain"}}function j(e){return z(this,void 0,void 0,(function*(){const{argvNoOptions:t,REPL:n}=e,o=t[t.indexOf("open")+1];X("open",o);const r=i.Util.findFile(i.Util.expandHomeDir(o)),s=o.replace(/\.gz$/,"").replace(/^.+\.(\w+)/,"$1");if("png"===s||"jpg"===s||"jpeg"===s||"tiff"===s||"tif"===s||"gif"===s||"icns"===s||"ico"===s||"webp"===s||"bpg"===s||"svg"===s||"mov"===s||"mp4"===s||"ogg"===s||"mp3"===s)return window.open(r,"target=_blank"),!0;if("pkl"===s||"sab"===s)throw new Error("Opening of binary files not supported");{const t=(yield n.rexec(`vfs fstat ${n.encodeComponent(o)} --with-data --enoent-ok`)).content;if(t.isDirectory)return X("trying to open a directory; delegating to ls"),n.qexec(`ls ${n.encodeComponent(o)}`);{if(t.isExecutable||t.viewer&&"open"!==t.viewer){const i=e.command.replace(o,"").replace(/^\s*open/,""),r=`${t.viewer} ${n.encodeComponent(o)}${i}`;return X("delegating to fstat-provided viewer",r),n.qexec(r)}const i=(0,G.dirname)(o),a=t.data;return{apiVersion:"kui-shell/v1",kind:"File",metadata:{name:(0,G.basename)(o),namespace:"."===i?void 0:i},modes:["string"==typeof a?{mode:"view",label:I("Edit"),contentType:Z(s),content:a}:{mode:"view",label:I("View"),content:a}],spec:{filepath:o,fullpath:r,size:t.size}}}}}))}const J={strict:"open",command:"open",title:I("openUsageTitle"),header:I("openUsageHeader"),optional:s},K=e=>{e.listen("/open",j,{usage:J})};var V=n(94854),B=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const Q=(0,i.i18n)("plugin-bash-like"),ee=W()("plugins/bash-like/cmds/head");function te(e,t){const n=e.substring(e.lastIndexOf(".")+1),o=(0,G.dirname)(e),r="."===o?void 0:o,s={mode:"view",label:Q("View"),contentType:Z(n),content:t};return{apiVersion:"kui-shell/v1",kind:"File",metadata:{name:(0,G.basename)(e),namespace:r},modes:[s],spec:{filepath:e,size:0,fullpath:i.Util.findFile(i.Util.expandHomeDir(e))}}}function ne(e){return B(this,void 0,void 0,(function*(){const{argvNoOptions:t,parsedOptions:n}=e,o=t[t.indexOf("head")+1];if(ee("head",o),"number"==typeof o&&o<0){const t="-n "+-1*o;return e.REPL.qexec(e.command.replace(o,t))}if(void 0===o)throw new Error("Missing input file");try{const e=yield(0,V.ot)(o,0,n.c||n.n||10,n.c?"bytes":"lines");return i.Capabilities.isHeadless()&&!i.Capabilities.inProxy()?e:te(o,e)}catch(e){throw new Error(`head: ${e.message}`)}}))}const ie=e=>{e.listen("/head",ne,{requiresLocal:!0})};var oe=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const re=W()("plugins/bash-like/cmds/tail");function se(e){return oe(this,void 0,void 0,(function*(){if(e.parsedOptions.q||e.parsedOptions.f||e.parsedOptions.F)return e.REPL.qexec(`sendtopty ${e.command}`,void 0,void 0,Object.assign(e.execOptions,{quiet:!1}));const{argvNoOptions:t,parsedOptions:n}=e,o=t[t.indexOf("tail")+1];if(re("tail",o),"number"==typeof o&&o<0){const t="-n "+-1*o;return e.REPL.qexec(e.command.replace(o,t))}const{size:r}=(yield e.REPL.rexec(`vfs fstat ${(0,i.encodeComponent)(o)}`)).content;try{let e="";if(n.c)e=yield(0,V.ot)(o,r-n.c,n.c,"bytes");else{let t=n.n||10;const i=4096;let s=Math.max(0,r-i);for(;t>0&&s>=0;){const n=yield(0,V.ot)(o,s,-t,"lines",s+i);t-=n.split(/\n/).length,s-=i,e+=n}}return te(o,e)}catch(e){throw new Error(`tail: ${e.message}`)}}))}const ae=e=>{e.listen("/tail",se,{requiresLocal:!0,flags:{boolean:["f","F","q"]}})};var ce=n(83137),de=n(51070),ue=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function le(e){return ue(this,void 0,void 0,(function*(){return{mode:"raw",content:yield(0,V.ls)(e,e.argvNoOptions.slice(2))}}))}function fe(e){return ue(this,void 0,void 0,(function*(){return{mode:"raw",content:yield(0,V.KC)(e,e.argvNoOptions[2],e.execOptions.data,{append:e.parsedOptions&&(e.parsedOptions.append||e.parsedOptions.a)})}}))}function pe(e){return ue(this,void 0,void 0,(function*(){return{mode:"raw",content:yield(0,V.UK)(e,e.argvNoOptions[2],!!e.parsedOptions["with-data"],!!e.parsedOptions["enoent-ok"])}}))}function he(e){e.listen("/vfs/_ls",le,{requiresLocal:!0,flags:{boolean:["A","a","d","c","C","l","h","t","r","s","S"]}}),e.listen("/vfs/_fstat",pe,{requiresLocal:!0,flags:{boolean:["with-data","enoent-ok"]}}),e.listen("/vfs/_fwrite",fe,{requiresLocal:!0}),e.listen("/vfs/cat",(e=>ue(this,void 0,void 0,(function*(){return yield(0,V.zG)(e.argvNoOptions[2],e.argvNoOptions[3]?parseInt(e.argvNoOptions[3],10):0,e.argvNoOptions[4]?parseInt(e.argvNoOptions[4],10):void 0,e.execOptions.data),!0}))),{requiresLocal:!0}),e.listen("/vfs/fslice",(e=>(0,V.ot)(e.argvNoOptions[2],parseInt(e.argvNoOptions[3],10),parseInt(e.argvNoOptions[4],10),e.argvNoOptions[5])),{requiresLocal:!0})}var me=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function ve(e,t,n,i){this.listen(`/${e}`,t,{flags:{boolean:("string"==typeof n?n.split(""):n).concat(i||[])}})}function ye(e){const t=ve.bind(e);t("vfs/ls",(e=>me(this,void 0,void 0,(function*(){try{return yield le(e)}catch(t){return e.REPL.qexec(e.command.replace("vfs ls","vfs _ls"))}}))),"AadcClhtrsS"),t("vfs/fstat",(e=>me(this,void 0,void 0,(function*(){try{return yield pe(e)}catch(t){return e.REPL.qexec(e.command.replace("vfs fstat","vfs _fstat"))}}))),["with-data","enoent-ok"]),t("vfs/fwrite",(e=>me(this,void 0,void 0,(function*(){try{return yield fe(e)}catch(t){return e.REPL.qexec(e.command.replace("vfs fwrite","vfs _fwrite"),void 0,void 0,{data:e.execOptions.data})}}))),"data"),t("rm",(e=>(0,V.rm)(e,e.argvNoOptions[1],!(!e.parsedOptions.r&&!e.parsedOptions.R)).then((e=>"string"!=typeof e||e))),"frRidPvw"),t("mkdir",(e=>(0,V.i$)(e,e.argvNoOptions[1]).then((()=>!0))),"pv"),t("rmdir",(e=>(0,V.ZD)(e,e.argvNoOptions[1]).then((()=>!0))),"p"),t("cp",(e=>{const t=e.argvNoOptions.length,n=e.argvNoOptions.slice(1,t-1),i=e.argvNoOptions[t-1];return(0,V.cp)(e,n,i)}),"acfHiLnPpRvXs")}var _e=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function we(e){return _e(this,void 0,void 0,(function*(){yield Promise.all([ye(e),he(e)])}))}var ge=n(86835),be=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const De=e=>be(void 0,void 0,void 0,(function*(){var t;yield Promise.all([(t=e,t.listen("/kuicd",p,{requiresLocal:!0}),void(i.Capabilities.inBrowser()?t.listen("/cd",h,{usage:l.cd}):t.listen("/cd",p,{usage:l.cd}))),q(e),H(e),ie(e),ae(e),K(e),(0,ce.Z)(e),(0,de.default)(e),we(e),(0,ge.plugin)(e)])}))},49287:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(26470),o=n(18495),r=n(14176),s=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class a extends r.t{constructor(){super("/",o.commandsTrie)}isLeaf(e){return super.isLeaf(e)||!e.isDirectory}loadAsString(){return""}trieGet(e){return this.fillInParents(e,Array.from(new Set(this.trie.get(e))).map(this.direntry))}parentsOf(e,t){const n=[];for(e=(0,i.dirname)(e);e.length>=t.length&&(n.push({mountPath:e+"/",isDirectory:!0}),"/"!==e);)e=(0,i.dirname)(e);return n}fillInParents(e,t){const n=o.Util.flatten(t.map((t=>this.parentsOf(t.mountPath,e.replace(/\/$/,"")))));return t.concat(n)}direntry(e){return{mountPath:e,isDirectory:!1,isExecutable:!0}}viewer(){return""}ls(e,t){const n=Object.create(null,{ls:{get:()=>super.ls}});return s(this,void 0,void 0,(function*(){const i=yield n.ls.call(this,e,t);if(i.length>0){const e={};return i.filter((t=>!e[t.path]&&(e[t.path]=!0,!0)))}return i}))}}const c=new a},94854:(e,t,n)=>{"use strict";n.d(t,{ls:()=>m,cp:()=>v,rm:()=>y,UK:()=>_,KC:()=>w,zG:()=>g,ot:()=>b,i$:()=>D,ZD:()=>k});var i=n(11227),o=n.n(i),r=n(26470),s=n(18495),a=n(42007),c=n(49287),d=n(48764).Buffer,u=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const l=o()("plugin/bash-like/fs/vfs/delegates");function f(e,t){let n=0;for(let i=0;i<e.length;i++)if("/"===e.charAt(i)&&n++===t)return e.slice(0,i);return e}const p={size:0,mtimeMs:0,uid:0,gid:0,mode:0};function h(e){return u(this,void 0,void 0,(function*(){/[*/]$/.test(e)||(e+="/");const t=function(e){let t=0;for(let n=0;n<e.length;n++)"/"===e.charAt(n)&&t++;return t}(e);try{const i=yield(0,a.kU)(e);if(i)return(n=i.filter((e=>!e.isLocal)).map((e=>({mountPath:f(e.mountPath,t),isLocal:e.isLocal,tags:e.tags}))),n.filter((({mountPath:e},t)=>n.findIndex((t=>t.mountPath===e))===t))).map((({mountPath:e,isLocal:t,tags:n})=>({name:(0,r.basename)(e),nameForDisplay:(0,r.basename)(e),path:e,stats:p,dirent:{mount:{isLocal:t,tags:n,mountPath:e},isFile:!1,isDirectory:!0,isSymbolicLink:!1,isSpecial:!1,isExecutable:!1,permissions:"",username:""}})))}catch(e){throw console.error("tab completion vfs match mounts error",e),e}var n}))}function m(...e){return u(this,void 0,void 0,(function*(){const t=0===e[1].length?[s.Util.cwd()]:e[1].map(a.AG),n=yield(0,a.tH)(t,!0),i=Promise.all(n.map((({filepaths:t,mount:n})=>u(this,void 0,void 0,(function*(){try{return yield n.ls(e[0],t)}catch(e){if(404!==e.code)throw/globby is not defined/.test(e.message)||l(e),e}}))))).then(s.Util.flatten),o=Promise.all(t.map(h)),r=c.Z.ls(e[0],t),d=s.Util.flatten(yield o);if(0===n.length&&0===d.length){const e=new Error(`VFS not mounted: ${t}`);throw e.code=404,e}const f=yield r;return function(e){const t=new Set;return e.filter((e=>{const n=e.path.replace(/\/$/,"");return!t.has(n)&&t.add(n)}))}((yield i).filter((e=>e)).concat(f).concat(d)).sort(((e,t)=>e.name.localeCompare(t.name)))}))}function v(e,t,n){return u(this,void 0,void 0,(function*(){const i=yield Promise.all(t.map((e=>(0,a.Xy)(e)))),o=yield(0,a.Xy)(n);if(o.isLocal){const r=i.map(((e,n)=>e.isLocal?t[n]:void 0)).filter((e=>e)),s=i.map(((e,n)=>e.isLocal?void 0:{filepath:t[n],mount:e})).filter((e=>e)),a=0===r.length?[]:[o.cp(e,r,n,r.map((()=>!0)),!0,i,o)];if(s.length>0){const t=s[0].mount,r=o===t;a.push(t.cp(e,s.map((e=>e.filepath)),n,s.map((e=>e.mount===t)),r,i,o))}const c=yield Promise.all(a);return 1===c.length&&!0===c[0]||c.join(", ")}{const r=o,s=i.map((e=>e===r)),a=o===r;return r.cp(e,t,n,s,a,i,o)}}))}function y(...e){return u(this,void 0,void 0,(function*(){return(yield(0,a.Xy)(e[1])).rm(e[0],e[1],e[2])}))}function _(...e){return u(this,void 0,void 0,(function*(){return(yield(0,a.Xy)(e[1])).fstat(e[0],e[1],e[2],e[3])}))}function w(...e){return u(this,void 0,void 0,(function*(){return(yield(0,a.Xy)(e[1])).fwrite(e[0],e[1],e[2],e[3])}))}function g(e,t,n,i){return u(this,void 0,void 0,(function*(){const o=yield(0,a.Xy)(e,void 0,!0);if(!o||!o.pipe)throw new Error(`pipe: can not find ${e}`);return o.pipe(e,t,n,i)}))}function b(e,t,n,i="bytes",o){return u(this,void 0,void 0,(function*(){const r=yield(0,a.Xy)(e,void 0,!0);if(!r)throw new Error(`fslice: can not find ${e}`);if("bytes"===i)return r.fslice(e,t,n);{let i=t,s="";for(;;)try{const t=yield r.fslice(e,i,void 0!==o?o-i:4e3);if(!t){console.error("bash-like fslice: no data read");break}{s=s.concat(t);const e=s.split("\n");if(e.length>=Math.abs(n)){s=(n<0?e.slice(n):e.slice(0,n)).join("\n");break}i=d.from(s).length}}catch(e){l(e);break}return s}}))}function D(...e){return u(this,void 0,void 0,(function*(){return(yield(0,a.Xy)(e[1])).mkdir(e[0],e[1])}))}function k(...e){return u(this,void 0,void 0,(function*(){return(yield(0,a.Xy)(e[1])).rmdir(e[0],e[1])}))}},98046:(e,t,n)=>{e.exports=n(76250)},31170:e=>{e.exports=function(e,t,n){var i=[],o={};t||(t={});var r=t.week||{dow:0,doy:6};function s(e){i.push("("+e+")")}function a(t){e=e.slice(t)}function c(t){e=t+e}for(;e.length;){switch(e.charAt(0)){case"M":if(o.month=!0,/^MMMM/.test(e)){s('["January","February","March","April","May","June","July","August","September","October","November","December"][_month]'),a(4);continue}if(/^MMM/.test(e)){s('["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][_month]'),a(3);continue}if(/^MM/.test(e)){s('_month+1 < 10 ? "0" : ""'),s("_month+1"),a(2);continue}if(/^Mo/.test(e)){s("_month+1"),s('_month < 3 ? ["st","nd","rd"][_month] : "th"'),a(2);continue}s("_month + 1"),a(1);continue;case"Q":if(o.month=!0,/^Qo/.test(e)){s("Math.ceil((_month + 1) / 3)"),s('["st","nd","rd","th"][Math.floor(_month / 3)]'),a(2);continue}s("Math.ceil((_month + 1) / 3)"),a(1);continue;case"D":if(/^DDD/.test(e)){if(o.dayOfYear=!0,/^DDDD/.test(e)){s('_doy < 100 ? "0" : ""'),s('_doy < 10 ? "0" : ""'),s("_doy"),a(4);continue}if(/^DDDo/.test(e)){s("_doy"),s('(_doy%100) === 11 || (_doy%100) === 12 || (_doy%100) === 13 || ((_doy-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_doy-1)%10]'),a(4);continue}s("_doy"),a(3);continue}if(o.date=!0,/^DD/.test(e)){s('_date < 10 ? "0" : ""'),s("_date"),a(2);continue}if(/^Do/.test(e)){s("_date"),s('_date === 11 || _date === 12 || _date === 13 || ((_date-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_date-1)%10]'),a(2);continue}s("_date"),a(1);continue;case"d":if(o.day=!0,/^dddd/.test(e)){s('["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][_day]'),a(4);continue}if(/^ddd/.test(e)){s('["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][_day]'),a(3);continue}if(/^dd/.test(e)){s('["Su","Mo","Tu","We","Th","Fr","Sa"][_day]'),a(2);continue}if(/^do/.test(e)){s("_day"),s('_day === 1 ? "st" : _day === 2 ? "nd" : _day === 3 ? "rd" : "th"'),a(2);continue}s("_day"),a(1);continue;case"e":o.day=!0,s("(_day + 7 - "+ +r.dow+") % 7"),a(1);continue;case"E":o.day=!0,s("_day === 0 ? 7 : _day"),a(1);continue;case"w":if(o.week=!0,/^ww/.test(e)){s('_week < 10 ? "0" : ""'),s("_week"),a(2);continue}if(/^wo/.test(e)){s("_week"),s('_week === 11 || _week === 12 || _week === 13 || ((_week-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_week-1)%10]'),a(2);continue}s("_week"),a(1);continue;case"W":if(o.isoweek=!0,/^WW/.test(e)){s('_i_week < 10 ? "0" : ""'),s("_i_week"),a(2);continue}if(/^Wo/.test(e)){s("_i_week"),s('_i_week === 11 || _i_week === 12 || _i_week === 13 || ((_i_week-1) % 10) > 2 ? "th" : ["st","nd","rd"][(_i_week-1)%10]'),a(2);continue}s("_i_week"),a(1);continue;case"Y":if(o.year=!0,/^YYYY/.test(e)){s("_year"),a(4);continue}if(/^YY/.test(e)){s('(_year % 100) < 10 ? "0" : ""'),s("_year % 100"),a(2);continue}s('_year < 9999 ? _year : "+" + _year'),a(1);continue;case"g":if(o.week=!0,/^gggg/.test(e)){s("_weekYear"),a(4);continue}if(/^gg/.test(e)){s('(_weekYear % 100) < 10 ? "0" : ""'),s("_weekYear % 100"),a(2);continue}break;case"G":if(o.isoweek=!0,/^GGGG/.test(e)){s("_i_weekYear"),a(4);continue}if(/^GG/.test(e)){s('(_i_weekYear % 100) < 10 ? "0" : ""'),s("_i_weekYear % 100"),a(2);continue}break;case"A":o.hour=!0,s('_hour > 11 ? "PM" : "AM"'),a(1);continue;case"a":o.hour=!0,s('_hour > 11 ? "pm" : "am"'),a(1);continue;case"H":if(o.hour=!0,/^HH/.test(e)){s('_hour < 10 ? "0" : ""'),s("_hour"),a(2);continue}s("_hour"),a(1);continue;case"h":if(o.hour=!0,/^hh/.test(e)){s('((_hour+11) % 12) < 9 ? "0" : ""'),s("((_hour+11) % 12) + 1"),a(2);continue}s("((_hour+11) % 12) + 1"),a(1);continue;case"k":if(o.hour=!0,/^kk/.test(e)){s('_hour > 0 && _hour < 10 ? "0" : ""'),s('_hour === 0 ? "24" : _hour'),a(2);continue}s('_hour === 0 ? "24" : _hour'),a(1);continue;case"m":if(o.minutes=!0,/^mm/.test(e)){s('_mins < 10 ? "0" : ""'),s("_mins"),a(2);continue}s("_mins"),a(1);continue;case"s":if(o.seconds=!0,/^ss/.test(e)){s('_secs < 10 ? "0" : ""'),s("_secs"),a(2);continue}s("_secs"),a(1);continue;case"S":if(o.millis=!0,/^SSS/.test(e)){s('_ms < 100 ? "0" : ""'),s('_ms < 10 ? "0" : ""'),s("_ms");var d=/^S{3,9}/.exec(e)[0].length;d>3&&s('"'+Array(d-2).join(0)+'"'),a(d);continue}if(/^SS/.test(e)){s('_ms < 100 ? "0" : ""'),s("Math.floor(_ms/10)"),a(2);continue}s("Math.floor(_ms / 100)"),a(1);continue;case"Z":if(o.offset=!0,/^ZZ/.test(e)){s('_offs >= 0 ? "+" : "-"'),s('_offH < 10 ? "0" : ""'),s("_offH"),s('_offM < 10 ? "0" : ""'),s("_offM"),a(2);continue}s('_offs >= 0 ? "+" : "-"'),s('_offH < 10 ? "0" : ""'),s("_offH"),s('":"'),s('_offM < 10 ? "0" : ""'),s("_offM"),a(1);continue;case"X":s("Math.floor(d / 1000)"),a(1);continue;case"x":s("d.valueOf()"),a(1);continue;case"L":if(/^LLLL/.test(e)){a(4),c("dddd, MMMM D, YYYY LT");continue}if(/^LLL/.test(e)){a(3),c("MMMM D, YYYY LT");continue}if(/^LL/.test(e)){a(2),c("MMMM D, YYYY");continue}if(/^LTS/.test(e)){a(3),c("h:mm:ss A");continue}if(/^LT/.test(e)){a(2),c("h:mm A");continue}a(1),c("MM/DD/YYYY");continue;case"l":if(/^llll/.test(e)){a(4),c("ddd, MMM D, YYYY LT");continue}if(/^lll/.test(e)){a(3),c("MMM D, YYYY LT");continue}if(/^ll/.test(e)){a(2),c("MMM D, YYYY");continue}if(/^lts/.test(e)){a(3),c("h:mm:ss A");continue}if(/^lt/.test(e)){a(2),c("h:mm A");continue}a(1),c("M/D/YYYY");continue;case"[":var u=e.indexOf("]");if(-1===u){s('"["'),a(1);continue}s(JSON.stringify(e.slice(1,u))),a(u+1);continue}s(JSON.stringify(e.charAt(0))),a(1)}var l="";return o.date&&(l+="var _date = d.get"+(n?"UTC":"")+"Date();\n"),o.month&&(l+="var _month = d.get"+(n?"UTC":"")+"Month();\n"),o.dayOfYear&&(l+="var _startOfYear = new Date(d.valueOf());\n_startOfYear.set"+(n?"UTC":"")+"Month(0);\n_startOfYear.set"+(n?"UTC":"")+"Date(1);\nvar _doy = Math.round((d - _startOfYear) / 864e5) + 1;\n"),o.day&&(l+="var _day = d.get"+(n?"UTC":"")+"Day();\n"),o.year&&(l+="var _year = d.get"+(n?"UTC":"")+"FullYear();\n"),o.hour&&(l+="var _hour = d.get"+(n?"UTC":"")+"Hours();\n"),o.minutes&&(l+="var _mins = d.get"+(n?"UTC":"")+"Minutes();\n"),o.seconds&&(l+="var _secs = d.get"+(n?"UTC":"")+"Seconds();\n"),o.millis&&(l+="var _ms = d.get"+(n?"UTC":"")+"Milliseconds();\n"),o.offset&&(l+=n?"var _offs = 0, _absOffs = 0, _offH = 0, _offM = 0;":"var _offs = -d.getTimezoneOffset();\nvar _absOffs = _offs < 0 ? -_offs : _offs;\nvar _offH = Math.floor(_absOffs / 60);\nvar _offM = _absOffs % 60;\n"),o.week&&(l+="var _wend = "+(r.doy-r.dow)+";\nvar _ddw = "+ +r.doy+" - d.get"+(n?"UTC":"")+"Day();\nif(_ddw > _wend) _ddw -= 7;\nif(_ddw < _wend - 7) _ddw += 7;\nvar _d2 = new Date(d.valueOf());\n_d2.set"+(n?"UTC":"")+"Date(d.get"+(n?"UTC":"")+"Date() + _ddw);\nvar _soy2 = new Date(_d2.valueOf());\n_soy2.set"+(n?"UTC":"")+"Month(0);\n_soy2.set"+(n?"UTC":"")+"Date(1);\nvar _doy2 = Math.round((_d2 - _soy2) / 864e5) + 1;\nvar _week = Math.ceil(_doy2 / 7);\nvar _weekYear = _d2.get"+(n?"UTC":"")+"FullYear();\n"),o.isoweek&&(l+="var _i_wend = 3;\nvar _i_ddw = 4 - d.get"+(n?"UTC":"")+"Day();\nif(_i_ddw > _i_wend) _i_ddw -= 7;\nif(_i_ddw < _i_wend - 7) _i_ddw += 7;\nvar _i_d2 = new Date(d.valueOf());\n_i_d2.set"+(n?"UTC":"")+"Date(d.get"+(n?"UTC":"")+"Date() + _i_ddw);\nvar _i_soy2 = new Date(_i_d2.valueOf());\n_i_soy2.set"+(n?"UTC":"")+"Month(0);\n_i_soy2.set"+(n?"UTC":"")+"Date(1);\nvar _i_doy2 = Math.round((_i_d2 - _i_soy2) / 864e5) + 1;\nvar _i_week = Math.ceil(_i_doy2 / 7);\nvar _i_weekYear = _i_d2.get"+(n?"UTC":"")+"FullYear();\n"),l+='return (\n"" +\n'+i.join(" +\n")+"\n);",new Function("d",l)}},76250:(e,t,n)=>{var i=n(31170);function o(e){return e?"YYYY-MM-DDTHH:mm:ss[Z]":"YYYY-MM-DDTHH:mm:ssZ"}function r(e){function t(t,n){t||(t=o(e));var r=i(t,null,e);return void 0===n?r:r(n)}var n={};return t.cached=function(t,r){t||(t=o(e));var s=n[t];return void 0===s&&(s=n[t]=i(t,null,e)),void 0===r?s:s(r)},t}e.exports=r(!1),e.exports.UTC=r(!0)}}]);